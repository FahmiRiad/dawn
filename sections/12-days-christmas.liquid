<section class="slider-wrapper">
  <!-- <button class="slide-arrow" id="slide-arrow-prev">&#8249;</button> -->

  <!-- <button class="slide-arrow" id="slide-arrow-next">&#8250;</button> -->
  <h2 data-item="section-heading">{{ section.settings.section_header }}</h2>
  <ul class="slides-container" id="slides-container">
    {% for i in (1..12) %}
      {% assign image_id = 'image_' | append: i %}
      {% assign image_url = section.settings[image_id] %}
      {% assign coming_soon_id = 'coming_soon' | append: i %}
      {% assign coming_soon_url = section.settings[coming_soon_id] %}
      {% assign url_id = 'url_day' | append: i %}
      {% assign day_url = section.settings[url_id] %}
      
      <li class="slide">
          <a href="{{ day_url }}" target="_blank">
            {% if image_url %}
              {{ image_url | image_url: width: 600 | image_tag }}
            {% else %}
              {{ coming_soon_url | image_url: width: 600 | image_tag }}
            {% endif %}
          </a>
        
      </li>
    {% endfor %}
  </ul>
</section>

{% schema %}
{
  "name" : "12 Days Module",
  "class" : "twelve-days-module",
  "settings" : [
    {
      "type": "text",
      "id": "section_header",
      "label": "12 Days header"
    },

    {
    "type": "image_picker",
    "label": "Day 1 image",
    "id": "image_1",
    "info": "Select the image of day1."
    },
    {
      "type": "url",
      "id": "url_day1",
      "label": "Day 1 URL"
    },
      {
      "type": "image_picker",
      "label": "Day 2 image",
      "id": "image_2",
      "info": "Select the image of day2."
    },
    
      {
      "type": "image_picker",
      "label": "Day 3 image",
      "id": "image_3",
      "info": "Select the image of day3."
    },
      {
      "type": "image_picker",
      "label": "Day 4 image",
      "id": "image_4",
      "info": "Select the image of day4."
    },
      {
      "type": "image_picker",
      "label": "Day 5 image",
      "id": "image_5",
      "info": "Select the image of day5."
    },
      {
      "type": "image_picker",
      "label": "Day 6 image",
      "id": "image_6",
      "info": "Select the image of day6."
    },
      {
      "type": "image_picker",
      "label": "Day 7 image",
      "id": "image_7",
      "info": "Select the image of day7."
    },
      {
      "type": "image_picker",
      "label": "Day 8 image",
      "id": "image_8",
      "info": "Select the image of day8."
    },
      {
      "type": "image_picker",
      "label": "Day 9 image",
      "id": "image_9",
      "info": "Select the image of day9."
    },
      {
      "type": "image_picker",
      "label": "Day 10 image",
      "id": "image_10",
      "info": "Select the image of day10."
    },
      {
      "type": "image_picker",
      "label": "Day 11 image",
      "id": "image_11",
      "info": "Select the image of day11."
    },
      {
      "type": "image_picker",
      "label": "Day 12 image",
      "id": "image_12",
      "info": "Select the image of day12."
    },
      {
      "type": "image_picker",
      "label": "Coming soon day1",
      "id": "coming_soon1",
      "info": "Select the image of coming."
     },
    {
      "type": "image_picker",
      "label": "Coming soon day2",
      "id": "coming_soon2",
      "info": "Select the image of coming."
     },
    {
      "type": "image_picker",
      "label": "Coming soon day3",
      "id": "coming_soon3",
      "info": "Select the image of coming."
     },
    {
      "type": "image_picker",
      "label": "Coming soon day4",
      "id": "coming_soon4",
      "info": "Select the image of coming."
     },
    {
      "type": "image_picker",
      "label": "Coming soon day5",
      "id": "coming_soon5",
      "info": "Select the image of coming."
     },
    {
      "type": "image_picker",
      "label": "Coming soon day6",
      "id": "coming_soon6",
      "info": "Select the image of coming."
     },
    {
      "type": "image_picker",
      "label": "Coming soon day7",
      "id": "coming_soon7",
      "info": "Select the image of coming."
     },
    {
      "type": "image_picker",
      "label": "Coming soon day8",
      "id": "coming_soon8",
      "info": "Select the image of coming."
     },
    {
      "type": "image_picker",
      "label": "Coming soon day9",
      "id": "coming_soon9",
      "info": "Select the image of coming."
     },
    {
      "type": "image_picker",
      "label": "Coming soon day10",
      "id": "coming_soon10",
      "info": "Select the image of coming."
     },
    {
      "type": "image_picker",
      "label": "Coming soon day11",
      "id": "coming_soon11",
      "info": "Select the image of coming."
     },
    {
      "type": "image_picker",
      "label": "Coming soon day12",
      "id": "coming_soon12",
      "info": "Select the image of coming."
     }
  ],
  "presets": [{
    "name": "12 Days Module",
    "category": "Image"
  }]
}
{% endschema %}

<style>
  .slider-wrapper {
   // margin: 1rem;
    position: relative;
    overflow: hidden;
    padding: var(--spacing--section--x);
  }

  .slides-container {
    //height: calc(100vh - 2rem);
    width: 100%;
    display: flex;
    overflow-x: scroll;
    scroll-behavior: auto;
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .slide-arrow {
    position: absolute;
    display: flex;
    top: 0;
    bottom: 0;
    margin: auto;
    height: 4rem;
    background-color: white;
    border: none;
    width: 2rem;
    font-size: 3rem;
    padding: 0;
    cursor: pointer;
    opacity: 0.5;
    transition: opacity 100ms;
  }

  .slide-arrow:hover,
  .slide-arrow:focus {
    opacity: 1;
  }

  #slide-arrow-prev {
    left: 0;
    padding-left: 0.25rem;
    border-radius: 0 2rem 2rem 0;
  }

  #slide-arrow-next {
    right: 0;
    padding-left: 0.75rem;
    border-radius: 2rem 0 0 2rem;
  }

  .slide {
    width: 100%;
    height: 100%;
    flex: 1 0 28%;
    padding: 20px 10px;

    @media screen and (max-width: 750px) {
      flex: 1 0 75%;
    }
  }

  .slide img {
  width:100%;
  border-radius: 15px;
  }



  footer {
    padding: 1em;
    text-align: center;
    background-color: #FFDFB9;
  }

  footer a {
    color: inherit;
    text-decoration: none;
  }

  footer .heart {
    color: #DC143C;
  }

  .expired-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 4.5rem;
    font-weight: bold;
    color: white; /* Change the color to white */
  }

  .darken-image {
    filter: brightness(20%); 
  }

  /* Define the scrollbar style */
  .slides-container::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  /* Define the thumb style */
  .slides-container::-webkit-scrollbar-thumb {
    background: #a38d57;
    border-radius: 10px;
  }

  /* Define the track style */
  .slides-container::-webkit-scrollbar-track {
    background-color: #e7e7e7;
    border-radius: 10px;
    //border: 1px solid #ccc;
  }

  /* Define the button style */
  .slides-container::-webkit-scrollbar-button {
   // background-color: #4d7fff;
  //  border-radius: 5px;
  }

  /* Define the button style when being hovered over */
  .slides-container::-webkit-scrollbar-button:hover {
   // background-color: #999999;
  }
</style>

<script>
const slidesContainer = document.getElementById("slides-container");
const slide = document.querySelector(".slide");
// const prevButton = document.getElementById("slide-arrow-prev");
// const nextButton = document.getElementById("slide-arrow-next");

// nextButton.addEventListener("click", (event) => {
//   const slideWidth = slide.clientWidth;
//     slidesContainer.scrollLeft += slideWidth;
// });

// prevButton.addEventListener("click", () => {
//   const slideWidth = slide.clientWidth;
//   slidesContainer.scrollLeft -= slideWidth;
// });

//const currentDate = new Date();
const currentDate = new Date('December 5, 2023');

// Set the target date to December 1, 2023
const targetDate = new Date('December 1, 2023');

// Check if the current date is between December 1 and December 12, 2023
if (currentDate >= targetDate && currentDate <= new Date('December 12, 2023')) {
  // Calculate the difference in days
  const timeDifference = currentDate.getTime() - targetDate.getTime();
  const daysDifference = Math.floor(timeDifference / (1000 * 60 * 60 * 24));

   if (daysDifference >= 0 && daysDifference < 2 ){

       const slides = document.querySelectorAll('.slide');
       slides[daysDifference].style.boxShadow = '0 0 20px black';
       slides[daysDifference].style.padding = 0;
       slides[daysDifference].style.margin = '0 10px';
   }


  else if (daysDifference >= 2){
    const slideWidth = slide.clientWidth;
    slidesContainer.scrollLeft += (slideWidth * (daysDifference - 1.3));
    //slidesContainer.style.transition = 'scroll 0.5s ease-in-out';
    const slides = document.querySelectorAll('.slide');
    if (daysDifference < slides.length) {
    // Subtracting 1 because array indices start from 0
       slides[daysDifference].style.boxShadow = '0 0 20px black';
       slides[daysDifference].style.padding = 0;
       slides[daysDifference].style.margin = '0 10px';
       
       }
    }

    // Get all slide elements
const slides = document.querySelectorAll('.slide');

// Iterate through slides and add "Expired" text to the images
slides.forEach((slide, index) => {
  const image = slide.querySelector('img');

  // Check if the current slide index is less than daysDifference
  if (index < daysDifference) {
    // Add "Expired" text to the image
    const expiredText = document.createElement('div');
    expiredText.classList.add('expired-text');
    expiredText.textContent = 'EXPIRED';
    slide.appendChild(expiredText);
    slide.classList.add('darken-image');
  }
  

  // if (index > daysDifference) {
  //   // Change the image source to the "12-Days-soon.png"
  //   image.src = 'https://cdn.shopify.com/s/files/1/0582/8971/7433/files/12-Days-soon.png?v=1700430403';
  // }
  
});


  console.log(`The current date is between December 1 and December 12, 2023.`);
  console.log(`Days difference from December 1: ${daysDifference}`);
} else {
  console.log(`The current date is not between December 1 and December 12, 2023.`);
}
</script>
